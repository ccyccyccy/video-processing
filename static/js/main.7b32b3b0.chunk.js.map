{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["App","useState","isCustomSize","setIsCustomSize","isCustomFps","setIsCustomFps","fps","setFps","width","setWidth","height","setHeight","extension","setExtension","preset","setPreset","crfValue","setCrfValue","progress","setProgress","message","setMessage","isProcessing","setIsProcessing","file","setFile","a","console","error","ffmpeg","createFFmpeg","log","ratio","load","name","fetchFile","FS","ffmpegArguments","push","toString","outputFileName","run","data","document","createElement","url","URL","createObjectURL","Blob","buffer","href","download","body","appendChild","click","setTimeout","removeChild","window","revokeObjectURL","onDrop","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","isDragActive","className","style","border","multiple","type","accept","value","checked","onChange","event","disabled","target","valueAsNumber","min","max","id","onClick","preventDefault","handleConvert","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7b32b3b0.chunk.js","sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport './App.css';\nimport { createFFmpeg, fetchFile } from '@ffmpeg/ffmpeg';\nimport { useDropzone } from 'react-dropzone';\n\nfunction App() {\n  const [isCustomSize, setIsCustomSize] = useState(false);\n  const [isCustomFps, setIsCustomFps] = useState(false);\n  const [fps, setFps] = useState(0);\n  const [width, setWidth] = useState(-1);\n  const [height, setHeight] = useState(-1);\n  const [extension, setExtension] = useState(\"mp4\");\n  const [preset, setPreset] = useState(\"medium\");\n  const [crfValue, setCrfValue] = useState(23);\n  const [progress, setProgress] = useState(0);\n  const [message, setMessage] = useState(\"\");\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [file, setFile] = useState<File | null>(null);\n\n\n  async function handleConvert() {\n    if (isProcessing) {\n      console.error(\"Is already processing\");\n      return;\n    }\n\n    if (!file) {\n      console.error(\"No files uploaded\");\n      return;\n    }\n\n    setIsProcessing(true);\n\n    const ffmpeg = createFFmpeg({\n      log: true,\n      progress: ({ ratio }) => {\n        setProgress(ratio);\n      },\n    });\n\n    setMessage('Loading...');\n    await ffmpeg.load();\n\n    setMessage('Transcoding...');\n    ffmpeg.FS('writeFile', file.name, await fetchFile(file));\n\n    const ffmpegArguments = ['-i', file.name];\n    if (isCustomFps) {\n      ffmpegArguments.push('-r', fps.toString());\n    }\n    if (isCustomSize) {\n      ffmpegArguments.push('-vf', `scale=${width}:${height}`);\n    }\n    const outputFileName = `output.${extension}`;\n    ffmpegArguments.push('-crf', crfValue.toString(), '-preset', preset, outputFileName);\n    console.log(ffmpegArguments);\n    await ffmpeg.run(...ffmpegArguments);\n\n    setMessage('Complete transcoding');\n    const data = ffmpeg.FS('readFile', outputFileName);\n    const a = document.createElement(\"a\");\n    const url = URL.createObjectURL(new Blob([data.buffer]));\n    a.href = url;\n    a.download = outputFileName;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function () {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 0);\n    setIsProcessing(false);\n  }\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    setFile(acceptedFiles[0]);\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\n\n  const style = {\n    width  : \"50vw\",\n    height : \"50vh\",\n    border : \"1px solid black\"\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"uploaderContainer\">\n        <div {...getRootProps({style})}>\n          <input {...getInputProps()} multiple={false} type=\"file\" accept=\"video/*,image/gif\" />\n          {\n            isDragActive ?\n              <p>Drop the files here ...</p> :\n              <p>Drag 'n' drop some files here, or click to select files</p>\n          }\n        </div>\n      </div>\n      <form className=\"mainForm\">\n        <div className=\"messageAndProgress\">{message} {progress !== 0 && <progress value={progress} />}</div>\n        <div className=\"fieldLabel\">FPS:</div>\n        <div className=\"fields\">\n          <label className=\"option\"> Same as source\n            <input type=\"checkbox\" checked={!isCustomFps} onChange={event => setIsCustomFps(!isCustomFps)} />\n          </label>\n          <input className=\"option\" type=\"number\" disabled={!isCustomFps} name=\"fps\" value={fps} onChange={event => setFps(event.target.valueAsNumber)} />\n        </div>\n        <div className=\"fieldLabel\">Size: </div>\n        <div className=\"fields\">\n          <label className=\"option\"> Same as source\n            <input type=\"checkbox\" checked={!isCustomSize} onChange={event => setIsCustomSize(!isCustomSize)} />\n          </label>\n          <label className=\"option\">\n            Width:\n            <input type=\"number\" disabled={!isCustomSize} name=\"width\" value={width} onChange={event => setWidth(event.target.valueAsNumber)} />\n          </label>\n          <label className=\"option\">\n            Height:\n            <input type=\"number\" disabled={!isCustomSize} name=\"height\" value={height} onChange={event => setHeight(event.target.valueAsNumber)} />\n          </label>\n          <span className=\"tooltip\">Use -1 for aspect ratio preserving scaling</span>\n        </div>\n        <div className=\"fieldLabel\">Extension: </div>\n        <div className=\"fields\">\n          <select value={extension} onChange={event => setExtension(event.target.value)}>\n            <option>mp4</option>\n            <option>mov</option>\n            <option>avi</option>\n            <option>mpeg</option>\n            <option>wmv</option>\n            <option>gif</option>\n          </select>\n        </div>\n        <div className=\"fieldLabel\">Compression preset: </div>\n        <div className=\"fields\">\n          <label className=\"option\"><input type=\"radio\" value=\"ultrafast\" checked={preset === \"ultrafast\"} onChange={event => setPreset(event.target.value)} />Ultrafast</label>\n          <label className=\"option\"><input type=\"radio\" value=\"superfast\" checked={preset === \"superfast\"} onChange={event => setPreset(event.target.value)} />Superfast</label>\n          <label className=\"option\"><input type=\"radio\" value=\"veryfast\" checked={preset === \"veryfast\"} onChange={event => setPreset(event.target.value)} />Veryfast</label>\n          <label className=\"option\"><input type=\"radio\" value=\"faster\" checked={preset === \"faster\"} onChange={event => setPreset(event.target.value)} />Faster</label>\n          <label className=\"option\"><input type=\"radio\" value=\"fast\" checked={preset === \"fast\"} onChange={event => setPreset(event.target.value)} />Fast</label>\n          <label className=\"option\"><input type=\"radio\" value=\"medium\" checked={preset === \"medium\"} onChange={event => setPreset(event.target.value)} />Medium</label>\n          <label className=\"option\"><input type=\"radio\" value=\"slow\" checked={preset === \"slow\"} onChange={event => setPreset(event.target.value)} />Slow</label>\n          <label className=\"option\"><input type=\"radio\" value=\"slower\" checked={preset === \"slower\"} onChange={event => setPreset(event.target.value)} />Slower</label>\n        </div>\n        <div className=\"fieldLabel\">CRF: </div>\n        <div className=\"fields\">\n          <input type=\"range\" name=\"CRF\" min=\"0\" max=\"51\" value={crfValue} onChange={event => setCrfValue(event.target.valueAsNumber)}></input> {crfValue} <output className=\"tooltip\">0 is loseless, 51 is worst</output>\n        </div>\n      </form>\n      <div>\n        <input id=\"convertButton\" type=\"submit\" value=\"Convert\" disabled={isProcessing} onClick={event => { event.preventDefault(); handleConvert(); }} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}