(this["webpackJsonpvideo-convert"]=this["webpackJsonpvideo-convert"]||[]).push([[0],{25:function(e,t,c){},26:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(1),s=c.n(n),r=c(16),i=c.n(r),l=(c(25),c(4)),o=c.n(l),u=c(5),j=c(17),b=c(3),d=(c(26),c(9)),p=c(19);var h=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!1),i=Object(b.a)(r,2),l=i[0],h=i[1],O=Object(n.useState)(0),m=Object(b.a)(O,2),f=m[0],v=m[1],x=Object(n.useState)(-1),g=Object(b.a)(x,2),N=g[0],C=g[1],y=Object(n.useState)(-1),S=Object(b.a)(y,2),k=S[0],w=S[1],F=Object(n.useState)("mp4"),L=Object(b.a)(F,2),R=L[0],A=L[1],D=Object(n.useState)("medium"),P=Object(b.a)(D,2),U=P[0],B=P[1],I=Object(n.useState)(23),T=Object(b.a)(I,2),E=T[0],J=T[1],M=Object(n.useState)(0),z=Object(b.a)(M,2),H=z[0],V=z[1],W=Object(n.useState)(""),q=Object(b.a)(W,2),G=q[0],K=q[1],Q=Object(n.useState)(!1),X=Object(b.a)(Q,2),Y=X[0],Z=X[1],$=Object(n.useState)(null),_=Object(b.a)($,2),ee=_[0],te=_[1];function ce(){return(ce=Object(j.a)(o.a.mark((function e(){var t,a,n,s,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=3;break}return console.error("Is already processing"),e.abrupt("return");case 3:if(ee){e.next=6;break}return console.error("No files uploaded"),e.abrupt("return");case 6:return Z(!0),t=Object(d.createFFmpeg)({log:!0,progress:function(e){var t=e.ratio;V(t)}}),K("Loading..."),e.next=11,t.load();case 11:return K("Transcoding..."),e.t0=t,e.t1=ee.name,e.next=16,Object(d.fetchFile)(ee);case 16:return e.t2=e.sent,e.t0.FS.call(e.t0,"writeFile",e.t1,e.t2),a=["-i",ee.name],l&&a.push("-r",f.toString()),c&&a.push("-vf","scale=".concat(N,":").concat(k)),n="output.".concat(R),a.push("-crf",E.toString(),"-preset",U,n),console.log(a),e.next=26,t.run.apply(t,a);case 26:K("Complete transcoding"),s=t.FS("readFile",n),r=document.createElement("a"),i=URL.createObjectURL(new Blob([s.buffer])),r.href=i,r.download=n,document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(i)}),0),Z(!1);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=Object(n.useCallback)((function(e){te(e[0])}),[]),ne=Object(p.a)({onDrop:ae}),se=ne.getRootProps,re=ne.getInputProps,ie=ne.isDragActive;return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"uploaderContainer",children:Object(a.jsxs)("div",Object(u.a)(Object(u.a)({},se({style:{width:"50vw",height:"50vh",border:"1px solid black"}})),{},{children:[Object(a.jsx)("input",Object(u.a)(Object(u.a)({},re()),{},{multiple:!1,type:"file",accept:"video/*,image/gif"})),ie?Object(a.jsx)("p",{children:"Drop the files here ..."}):Object(a.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]}))}),Object(a.jsxs)("form",{className:"mainForm",children:[Object(a.jsxs)("div",{className:"messageAndProgress",children:[G," ",0!==H&&Object(a.jsx)("progress",{value:H})]}),Object(a.jsx)("div",{className:"fieldLabel",children:"FPS:"}),Object(a.jsxs)("div",{className:"fields",children:[Object(a.jsxs)("label",{className:"option",children:[" Same as source",Object(a.jsx)("input",{type:"checkbox",checked:!l,onChange:function(e){return h(!l)}})]}),Object(a.jsx)("input",{className:"option",type:"number",disabled:!l,name:"fps",value:f,onChange:function(e){return v(e.target.valueAsNumber)}})]}),Object(a.jsx)("div",{className:"fieldLabel",children:"Size: "}),Object(a.jsxs)("div",{className:"fields",children:[Object(a.jsxs)("label",{className:"option",children:[" Same as source",Object(a.jsx)("input",{type:"checkbox",checked:!c,onChange:function(e){return s(!c)}})]}),Object(a.jsxs)("label",{className:"option",children:["Width:",Object(a.jsx)("input",{type:"number",disabled:!c,name:"width",value:N,onChange:function(e){return C(e.target.valueAsNumber)}})]}),Object(a.jsxs)("label",{className:"option",children:["Height:",Object(a.jsx)("input",{type:"number",disabled:!c,name:"height",value:k,onChange:function(e){return w(e.target.valueAsNumber)}})]}),Object(a.jsx)("span",{className:"tooltip",children:"Use -1 for aspect ratio preserving scaling"})]}),Object(a.jsx)("div",{className:"fieldLabel",children:"Extension: "}),Object(a.jsx)("div",{className:"fields",children:Object(a.jsxs)("select",{value:R,onChange:function(e){return A(e.target.value)},children:[Object(a.jsx)("option",{children:"mp4"}),Object(a.jsx)("option",{children:"mov"}),Object(a.jsx)("option",{children:"avi"}),Object(a.jsx)("option",{children:"mpeg"}),Object(a.jsx)("option",{children:"wmv"}),Object(a.jsx)("option",{children:"gif"})]})}),Object(a.jsx)("div",{className:"fieldLabel",children:"Compression preset: "}),Object(a.jsxs)("div",{className:"fields",children:[Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"ultrafast",checked:"ultrafast"===U,onChange:function(e){return B(e.target.value)}}),"Ultrafast"]}),Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"superfast",checked:"superfast"===U,onChange:function(e){return B(e.target.value)}}),"Superfast"]}),Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"veryfast",checked:"veryfast"===U,onChange:function(e){return B(e.target.value)}}),"Veryfast"]}),Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"faster",checked:"faster"===U,onChange:function(e){return B(e.target.value)}}),"Faster"]}),Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"fast",checked:"fast"===U,onChange:function(e){return B(e.target.value)}}),"Fast"]}),Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"medium",checked:"medium"===U,onChange:function(e){return B(e.target.value)}}),"Medium"]}),Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"slow",checked:"slow"===U,onChange:function(e){return B(e.target.value)}}),"Slow"]}),Object(a.jsxs)("label",{className:"option",children:[Object(a.jsx)("input",{type:"radio",value:"slower",checked:"slower"===U,onChange:function(e){return B(e.target.value)}}),"Slower"]})]}),Object(a.jsx)("div",{className:"fieldLabel",children:"CRF: "}),Object(a.jsxs)("div",{className:"fields",children:[Object(a.jsx)("input",{type:"range",name:"CRF",min:"0",max:"51",value:E,onChange:function(e){return J(e.target.valueAsNumber)}})," ",E," ",Object(a.jsx)("output",{className:"tooltip",children:"0 is loseless, 51 is worst"})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{id:"convertButton",type:"submit",value:"Convert",disabled:Y,onClick:function(e){e.preventDefault(),function(){ce.apply(this,arguments)}()}})})]})},O=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,50)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(h,{})}),document.getElementById("root")),O()}},[[49,1,2]]]);
//# sourceMappingURL=main.7b32b3b0.chunk.js.map