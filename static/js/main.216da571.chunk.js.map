{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["App","useState","isCustomSize","setIsCustomSize","isCustomFps","setIsCustomFps","fps","setFps","width","setWidth","height","setHeight","extension","setExtension","progress","setProgress","message","setMessage","uploaderEl","useRef","a","current","console","error","files","ffmpeg","createFFmpeg","log","ratio","file","load","name","fetchFile","FS","ffmpegArguments","push","toString","outputFileName","run","data","document","createElement","url","URL","createObjectURL","Blob","buffer","href","download","body","appendChild","click","setTimeout","removeChild","window","revokeObjectURL","className","type","accept","ref","value","checked","onChange","event","disabled","target","valueAsNumber","onClick","preventDefault","handleConvert","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.216da571.chunk.js","sourcesContent":["import React, { useRef, useState } from 'react';\nimport './App.css';\nimport { createFFmpeg, fetchFile } from '@ffmpeg/ffmpeg';\n\nfunction App() {\n  const [isCustomSize, setIsCustomSize] = useState(false);\n  const [isCustomFps, setIsCustomFps] = useState(false);\n  const [fps, setFps] = useState(0);\n  const [width, setWidth] = useState(-1);\n  const [height, setHeight] = useState(-1);\n  const [extension, setExtension] = useState(\"mp4\");\n  const [progress, setProgress] = useState(0);\n  const [message, setMessage] = useState(\"\");\n\n  const uploaderEl = useRef<HTMLInputElement>(null);\n\n  async function handleConvert() {\n    if (!uploaderEl.current) {\n      console.error(\"Upload file element is null\");\n      return;\n    }\n\n    if (!uploaderEl.current.files || !uploaderEl.current.files[0]) {\n      console.error(\"No files uploaded\");\n      return;\n    }\n\n    const ffmpeg = createFFmpeg({\n      log: true,\n      progress: ({ ratio }) => {\n        setProgress(ratio);\n      },\n    });\n\n    const file = uploaderEl.current.files[0];\n    setMessage('Loading...');\n    await ffmpeg.load();\n\n    setMessage('Transcoding...');\n    ffmpeg.FS('writeFile', file.name, await fetchFile(file));\n\n    const ffmpegArguments = ['-i', file.name];\n    if (isCustomFps) {\n      ffmpegArguments.push('-r', fps.toString());\n    }\n    if (isCustomSize) {\n      ffmpegArguments.push('-vf', `scale=${width}:${height}`);\n    }\n    const outputFileName = `output.${extension}`;\n    ffmpegArguments.push(outputFileName);\n    await ffmpeg.run(...ffmpegArguments);\n\n    setMessage('Complete transcoding');\n    const data = ffmpeg.FS('readFile', outputFileName);\n    const a = document.createElement(\"a\");\n    const url = URL.createObjectURL(new Blob([data.buffer]));\n    a.href = url;\n    a.download = outputFileName;\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function () {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }, 0);\n  }\n\n  return (\n    <div className=\"App\">\n      <form>\n        <div>\n          <label> Choose a video file:\n            <input type=\"file\" accept=\"video/*,image/gif\" ref={uploaderEl} />\n          </label>\n        </div>\n        {message && <div>{message}</div>}\n        {progress !== 0 && <progress value={progress} />}\n        <div>\n          FPS:\n          <label> Same as source\n            <input type=\"checkbox\" checked={!isCustomFps} onChange={event => setIsCustomFps(!isCustomFps)} />\n          </label>\n          <input type=\"number\" disabled={!isCustomFps} name=\"fps\" value={fps} onChange={event => setFps(event.target.valueAsNumber)} />\n        </div>\n        <div>\n          Size:\n          <label> Same as source\n            <input type=\"checkbox\" checked={!isCustomSize} onChange={event => setIsCustomSize(!isCustomSize)} />\n          </label>\n          <label>\n            Width:\n            <input type=\"number\" disabled={!isCustomSize} name=\"width\" value={width} onChange={event => setWidth(event.target.valueAsNumber)} />\n          </label>\n          <label>\n            Height:\n            <input type=\"number\" disabled={!isCustomSize} name=\"height\" value={height} onChange={event => setHeight(event.target.valueAsNumber)} />\n          </label>\n          <span className=\"tooltip\">Use -1 for aspect ratio preserving scaling</span>\n        </div>\n        <div>\n          <label> Extension:\n            <select value={extension} onChange={event => setExtension(event.target.value)}>\n              <option>mp4</option>\n              <option>mov</option>\n              <option>avi</option>\n              <option>mpeg</option>\n              <option>wmv</option>\n              <option>gif</option>\n            </select>\n          </label>\n        </div>\n        <div>\n          <input type=\"submit\" value=\"Convert\" onClick={event => {event.preventDefault(); handleConvert();}} />\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}